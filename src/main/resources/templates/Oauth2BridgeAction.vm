<html>
<head>
    <title>$i18n.getText("oauth2bridge.title")</title>
    <meta name="admin.active.section" content="admin_plugins_menu/oauth2-bridge-section"/>
    <meta name="admin.active.tab" content="oauth2-bridge-setting-item-link"/>
    <meta name="decorator" content="atl.admin"/>
</head>
<body>

<div class="aui-page-panel">
    <div class="aui-page-panel-content">

        <div class="aui-page-header-main">
            <h1>$i18n.getText("oauth2bridge.title")</h1>
        </div>

        #if($action.hasAnyMessages())
            #if($action.getErrors().size() > 0 || $action.getErrorMessages().size() > 0)
                <div class="aui-message aui-message-error">
                    <p class="title">
                        <strong>$i18n.getText("oauth2bridge.save.error.title")</strong>
                    </p>
                    <ul>
                        #foreach($errorKey in $action.getErrors().keySet())
                            #set($errorMessage = $action.getErrors().get($errorKey))
                            <li>
                                #if($errorKey != "null" && $errorKey != "")
                                    <strong>$errorKey</strong>: $errorMessage
                                #else
                                    $errorMessage
                                #end
                            </li>
                        #end
                        #foreach($errorMessage in $action.getErrorMessages())
                            <li>$errorMessage</li>
                        #end
                    </ul>
                </div>
            #else
                <div class="aui-message aui-message-success">
                    <p class="title">
                        <strong>$action.getMessage()</strong>
                    </p>
                </div>
            #end
        #end

        <form class="aui" method="post">
            <input type="hidden" name="command" value="execute"/>

            <fieldset class="group">
                <legend><span>$i18n.getText("oauth2bridge.fieldset.endpoint"):</span></legend>

                <div class="aui-field-group">
                    <label for="userInfoEndpointId">
                        <strong>$i18n.getText("oauth2bridge.userinfoEndpoint"):</strong>
                    </label>
                    <input class="text medium-long-field" type="text" id="userInfoEndpointId" name="userInfoEndpoint" placeholder="$i18n.getText("oauth2bridge.userinfoEndpoint.placeholder")" value="$!action.userInfoEndpoint"/>
                    <div class="description">
                        $i18n.getText("oauth2bridge.userinfoEndpoint.description")
                    </div>
                </div>
            </fieldset>

            <fieldset class="group">
                <legend><span>$i18n.getText("oauth2bridge.fieldset.session"):</span></legend>

                <div class="aui-field-group">
                    <label for="sessionTimeoutId">
                        <strong>$i18n.getText("oauth2bridge.sessionTimeoutSec"):</strong>
                    </label>
                    <input class="text short-field" type="number" id="sessionTimeoutId" name="sessionTimeoutSec" min="60" placeholder="$i18n.getText("oauth2bridge.sessionTimeoutSec.placeholder")" value="$!action.sessionTimeoutSec"/>
                    <div class="description">
                        $i18n.getText("oauth2bridge.sessionTimeoutSec.description")
                    </div>
                </div>
            </fieldset>

            <fieldset class="group">
                <legend><span>$i18n.getText("oauth2bridge.fieldset.tls"):</span></legend>

                <div class="aui-field-group">
                    <div class="checkbox">
                        <input type="checkbox" id="insecureSkipVerifyId" name="insecureSkipVerify" value="true" #if($action.insecureSkipVerify) checked #end />
                        <label for="insecureSkipVerifyId">
                            <strong>$i18n.getText("oauth2bridge.insecureSkipVerify")</strong>
                        </label>
                    </div>
                    <div class="description">
                        $i18n.getText("oauth2bridge.insecureSkipVerify.description")
                    </div>
                </div>

                <div class="aui-field-group">
                    <label for="trustCaCertId">
                        <strong>$i18n.getText("oauth2bridge.trustCaCert"):</strong>
                    </label>
                    <textarea class="textarea full-width-field" id="trustCaCertId" name="trustCaCert" rows="10" placeholder="$i18n.getText("oauth2bridge.trustCaCert.placeholder")">$!action.trustCaCert</textarea>
                    <div class="description">
                        $i18n.getText("oauth2bridge.trustCaCert.description")
                    </div>
                </div>
            </fieldset>

            <div class="aui-buttons">
                <input type="submit" class="aui-button aui-button-primary" value="$i18n.getText("oauth2bridge.save.button")"/>
            </div>

        </form>
    </div>
</div>

</body>
</html>